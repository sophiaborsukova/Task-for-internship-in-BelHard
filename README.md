# Task for internship in BelHard
Simple multithreading client-server using python sockets. 

Данный проект создавался как тестовое задание во время стажировки.

Проект состоит из трех основных файлов с расширением .py: клиент, сервер, скрипт для запуска сервера 
и клиента(ов) с определенными параметрами. 

## Клиент
Создает n число потоков (n вводится с помощью аргументов командной строки при запуске, но не обязательно,
по умолчанию n = 5), каждый из которых будет отправлять на сервер строку вида "Поток k, итерация i^2+i" 
(эта информация дублируется в терминале, для удобства). Потоки пишут свои строки синхронно, строго друг за другом.
``` Thread 0, iteration 1
Thread 1, iteration 1
Thread 2, iteration 1
Thread 3, iteration 1
Thread 4, iteration 1
Thread 0, iteration 2
Thread 1, iteration 2
Thread 2, iteration 2
....
```
Количество итераций задётся аргументом командной строки либо по умолчанию равно 10. 
Адрес, куда отсылать сообщения, задаётся с помощью аргументов командной строки (либо значение по умолчанию).
## Сервер
Обрабатывает любое количество одновременно подключённых клиентов. Принимает сообщения от клиентов, потом отвечает им
сообщением 'ok' (для того, чтобы информация не смешивалась).
Пишет log (в файл logging.log, при запуске создается автоматически, при повторном запуске данные перезаписываются)
вида 
``` 
INFO	| 2019-02-24 15:10:14 --127.0.0.1:49030 recieved: Thread 3, iteration 1
``` 
при получении сообщения,
``` 
INFO	| 2019-02-24 15:10:14 --127.0.0.1:48994 send: ok
```
при отправке ответа, а так же выводит данную
информацию в терминал. IP и порт сервера необходимо задавать с помощью аргументов командной строки 
(либо они стоят по умолчанию).

## Запуск сервера и клиента(ов) 
### 1. Запуск сервера и n клиентов с помощью скрипта
Запустить сервер и n клиентов можно выполнив
```
python3 runall.py
``` 
в терминале. Так же поддерживает аргументы командной строки. Например: 
```
python3 runall.py -host '0.0.0.0' -clhost 'localhost' -port 2005 -cl 5
```
где  ```-host``` - адрес сервера,  ```-clhost``` адрес клиента, ```-port``` - порт, ```-cl``` - количество клиентов, 
которые будут подключаться к серверу. 
### 2. Отдельный запуск
Запустить сервер можно выполнив 
```
python3 server.py
``` 
в терминале. Так же поддерживает аргументы командной строки. Например: 
```
python3 server.py -host '0.0.0.0' -port 2005 
```
где  ```-host``` - адрес сервера,  ```-port``` - порт.

Запустить клиента можно выполнив 
```
python3 client.py
``` 
в терминале. Так же поддерживает аргументы командной строки. Например: 
```
python3 client.py -nhost 'localhost' -port 2005 -ni 10 -nt 5 
```
где  ```-host``` - адрес клиента,  ```-port``` - порт, ```-ni``` - количество итераций,  ```-nt``` - количество потоков.
 
